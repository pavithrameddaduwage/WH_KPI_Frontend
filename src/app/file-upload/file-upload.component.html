<div class="bg-gradient-to-br from-gray-50 via-white to-gray-100 min-h-screen flex flex-col items-center p-6">
  <h1 class="text-3xl font-bold text-gray-800 mb-6">
    <span class="text-sky-600">Upload POS Data</span>
  </h1>

  <div class="bg-white shadow-md rounded-md w-full max-w-lg p-6 space-y-6">
    <!-- File Type Selector -->
    <div>
      <label for="fileType" class="block text-base font-medium text-gray-700 mb-1">Select File Type</label>
      <select
        [(ngModel)]="selectedFileType"
        id="fileType"
        name="fileType"
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 text-sm"
        required
        aria-label="File Type"
      >
        <option value="" disabled selected>Select the file type</option>
        <option *ngFor="let type of validFileTypes" [value]="type">{{ type }}</option>
      </select>
      <div *ngIf="uploadError && !selectedFileType" class="text-red-500 text-xs mt-1">
        Please select a file type.
      </div>
    </div>

    <!-- File Dropzone -->
    <div
      class="w-full p-4 border-2 border-dashed rounded-md flex flex-col items-center justify-center bg-gray-50 hover:bg-gray-100 transition cursor-pointer"
      (drop)="onFileDrop($event)"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (click)="fileInput.click()"
      [ngClass]="{'bg-cyan-50 border-cyan-600': isDragOver, 'border-gray-300': !isDragOver}"
      aria-label="Drag and drop your file here or click to select"
    >
      <input type="file" #fileInput (change)="onFileChange($event)" class="hidden" />
      <div class="flex flex-col items-center space-y-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-sky-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5" />
        </svg>
        <p class="text-sm text-gray-600">Drag and drop your file here, or click to browse</p>

        <!-- Display Selected File Name -->
        <div *ngIf="selectedFile" class="mt-2 text-sm text-gray-600">
          {{ selectedFile.name }}
        </div>
      </div>
    </div>

    <!-- Progress Bar -->
    <div *ngIf="isLoading" class="relative pt-2">
      <div class="w-full bg-gray-200 h-2.5 rounded-full">
        <div class="bg-green-600 h-2.5 rounded-full" [style.width.%]="uploadProgress"></div>
      </div>
      <p *ngIf="uploadProgress > 0" class="text-sm text-gray-600 mt-2">
        Uploading: {{ uploadProgress }}%
      </p>
    </div>

    <!-- Success or Error Dialog -->
    <div *ngIf="isModalOpen" class="fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center z-50">
      <div class="bg-white p-6 rounded-md shadow-lg w-full max-w-sm">
        <h3 class="text-xl font-semibold" [ngClass]="{
          'text-green-600': dialogType === 'success',
          'text-yellow-600': dialogType === 'warning',
          'text-red-600': dialogType === 'error',
          'text-blue-600': dialogType === 'info'
        }">{{ dialogHeader }}</h3>
        <p class="text-sm text-gray-700 mt-2">{{ dialogMessage }}</p>
        <div class="mt-4 flex justify-end space-x-2">
          <button (click)="onDialogClose()" class="bg-gray-300 text-gray-800 px-4 py-2 rounded-md">Close</button>
        </div>
      </div>
    </div>

    <!-- Upload and Cancel Buttons -->
    <div class="flex justify-between">
      <button
        type="button"
        (click)="onSubmit()"
        class="bg-sky-600 hover:bg-sky-700 text-white text-sm font-medium py-2 px-4 rounded-md shadow"
        [disabled]="isLoading || !selectedFile || !selectedFileType"
      >
        <span *ngIf="isLoading">Uploading...</span>
        <span *ngIf="!isLoading">Start Upload</span>
      </button>
      <button
        type="button"
        (click)="cancelUpload()"
        class="bg-red-600 hover:bg-red-700 text-white text-sm font-medium py-2 px-4 rounded-md shadow"
        *ngIf="isLoading"
      >
        Cancel
      </button>
    </div>
  </div>
</div>
